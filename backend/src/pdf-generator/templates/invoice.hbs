<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Medical Invoice</title>

  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      padding: 40px;
      color: #003366;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .company-info {
      font-size: 14px;
      color: #333;
    }

    .upload-logo-box {
      border: 2px solid #2a64d4;
      padding: 20px;
      width: 180px;
      height: 80px;
      text-align: center;
      border-radius: 10px;
      color: #2a64d4;
    }

    .invoice-title {
      margin-top: 60px;
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      letter-spacing: 3px;
    }

    .section {
      margin-top: 40px;
      display: flex;
      justify-content: space-between;
    }

    .bill-to {
      font-size: 14px;
    }

    .invoice-info {
      text-align: right;
      font-size: 14px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
      font-size: 14px;
    }

    .table-header {
      background: #003366;
      color: white;
      font-weight: bold;
    }

    td {
      padding: 8px 4px;
      border-bottom: 1px solid #dcdcdc;
    }

    .text-right {
      text-align: right;
    }

    .totals {
      width: 40%;
      float: right;
      margin-top: 20px;
    }

    .totals td {
      border: none;
      font-size: 14px;
    }

    .totals .total-row {
      font-weight: bold;
      background: #003366;
      color: white;
    }

    .terms {
      margin-top: 80px;
      font-size: 14px;
    }

    .terms-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <div class="header">
    <div class="company-info">
      <strong>PARAGON Diagnostics And Multi-Specialty Clinic</strong><br>
      Bluz Building 2, Tadeco Road,<br>
      Brgy. San Francisco, Panabo, Philippines
    </div>

    <div class="upload-logo-box">
       <img src="data:image/png;base64,{{headerImg}}"style="max-width: 100%; max-height: 100%;" />
    </div>
  </div>

  <!-- TITLE -->
  <div class="invoice-title">
    MEDICAL INVOICE
  </div>

  <!-- BILL TO + INVOICE INFO -->
  <div class="section">
    <div class="bill-to">
      <span style="font-weight:bold;">Bill To:</span><br>
      <strong>{{invoice.name}}</strong>
    </div>

    <div class="invoice-info">
      <div><strong>Invoice #:</strong> {{invoice.invoice_no}}</div>
      <div><strong>Invoice date:</strong> {{formatDate  invoice.created_at}}</div>
    </div>
  </div>

  <!-- ITEMS TABLE -->
  <table>
    <thead>
      <tr class="table-header">
        <td>Description</td>
        <td class="text-right" width="20%">Amount</td>
      </tr>
    </thead>

    <tbody>
      {{#each items.labData}}
      <tr>
        <td>{{service_description}}</td>
        <td class="text-right">{{service_price}}</td>
      </tr>
      {{/each}}
    </tbody>
  </table>

  <!-- TOTALS -->
  <table class="totals">
    <tr>
      <td>Subtotal:</td>
      <td class="text-right">{{invoice.amount}}</td>
    </tr>
    <tr>
      <td>Discount:</td>
          {{!-- If using uploaded image --}}
      {{#ifCond invoice.discount_type 1}}
        <td class="text-right">Senior Citizen</td>
      {{else}}
         {{#ifCond invoice.discount_type 2}}
        <td class="text-right">PWD</td>
      {{else}}
       {{#ifCond invoice.discount_type 3}}
        <td class="text-right">Employee</td>
      {{else}}
        <td></td>
        {{/ifCond}}
        {{/ifCond}}
      {{/ifCond}}
     
    </tr>
    <tr>
      <td>Discount Amount:</td>
      <td class="text-right">-{{invoice.discount_amount}}</td>
    </tr>
    <tr class="total-row">
      <td>Total:</td>
      <td class="text-right">{{invoice.total_amount}}</td>
    </tr>
  </table>

  <!-- TERMS -->
  <div class="terms">
    <div class="terms-title">Terms and Conditions</div>
    <div>{{terms}}</div>
  </div>

</body>
</html>
